# Git 常用命令手册

## 📋 目录
- [分支操作](#分支操作)
- [暂存操作](#暂存操作)
- [回退操作](#回退操作)
- [标签操作](#标签操作)
- [常规操作](#常规操作)
- [仓库管理](#仓库管理)
- [文件忽略](#文件忽略)
- [配置相关](#配置相关)

## 分支操作

### 查看分支
| 命令 | 说明 |
|------|------|
| `git branch` | 查看本地分支列表 |
| `git branch -v` | 查看所有分支的最后一次提交 |
| `git branch -vv` | 查看分支详细信息（包括跟踪关系） |
| `git branch --merged` | 查看已合并到当前分支的分支 |
| `git branch --no-merged` | 查看未合并到当前分支的分支 |

### 创建分支
| 命令 | 说明 |
|------|------|
| `git branch 分支名` | 创建新分支 |
| `git checkout -b 分支名` | 创建并切换到新分支 |
| `git switch -c 分支名` | 创建并切换到新分支（Git 2.23+） |
| `git branch -b 分支名 origin/分支名` | 创建并跟踪远程分支 |

### 切换分支
| 命令 | 说明 |
|------|------|
| `git checkout 分支名` | 切换到指定分支 |
| `git switch 分支名` | 切换到指定分支（Git 2.23+） |

### 合并分支
| 命令 | 说明 |
|------|------|
| `git merge 分支名` | 合并指定分支到当前分支 |
| `git merge --no-ff -m '描述' 分支名` | 非快进式合并，保留合并记录 |

### 删除分支
| 命令 | 说明 |
|------|------|
| `git branch -d 分支名` | 删除本地分支（安全删除） |
| `git branch -D 分支名` | 强制删除本地分支 |
| `git push origin --delete 分支名` | 删除远程分支 |
| `git push origin :分支名` | 删除远程分支（旧语法） |

## 暂存操作

### 基本暂存命令
| 命令 | 说明 |
|------|------|
| `git stash` | 暂存当前修改 |
| `git stash save "描述"` | 暂存当前修改并添加描述 |
| `git stash list` | 查看暂存列表 |
| `git stash show stash@{n}` | 查看某次暂存的详细信息 |

### 恢复暂存
| 命令 | 说明 |
|------|------|
| `git stash apply` | 恢复最近的一次暂存 |
| `git stash apply stash@{n}` | 恢复指定的暂存 |
| `git stash pop` | 恢复暂存并删除暂存记录 |
| `git stash pop stash@{n}` | 恢复指定暂存并删除记录 |

### 清理暂存
| 命令 | 说明 |
|------|------|
| `git stash drop stash@{n}` | 移除某次暂存 |
| `git stash clear` | 清除所有暂存 |

## 回退操作

### 版本回退
| 命令 | 说明 |
|------|------|
| `git reset --soft HEAD^` | 回退到上一个版本（保留修改） |
| `git reset --mixed HEAD^` | 回退到上一个版本（保留工作区） |
| `git reset --hard HEAD^` | 回退到上一个版本（彻底删除） |
| `git reset --hard commit_id` | 回退到指定版本 |

### 撤销修改
| 命令 | 说明 |
|------|------|
| `git checkout -- 文件名` | 撤销工作区的文件修改 |
| `git reset HEAD 文件名` | 从暂存区撤回文件到工作区 |
| `git restore 文件名` | 撤销文件修改（Git 2.23+） |
| `git restore --staged 文件名` | 从暂存区撤销文件（Git 2.23+） |

## 标签操作

### 查看标签
| 命令 | 说明 |
|------|------|
| `git tag` | 列出所有标签 |
| `git tag -l "v1.8.*"` | 按模式搜索标签 |
| `git show 标签名` | 查看标签详细信息 |

### 创建标签
| 命令 | 说明 |
|------|------|
| `git tag 标签名` | 创建轻量标签（当前版本） |
| `git tag 标签名 commit_id` | 对指定提交打标签 |
| `git tag -a 标签名 -m '描述'` | 创建带备注的注解标签 |
| `git tag -a 标签名 commit_id -m '描述'` | 对指定提交创建注解标签 |

### 推送标签
| 命令 | 说明 |
|------|------|
| `git push origin 标签名` | 推送单个标签到远程 |
| `git push origin --tags` | 推送所有标签到远程 |

### 删除标签
| 命令 | 说明 |
|------|------|
| `git tag -d 标签名` | 删除本地标签 |
| `git push origin --delete 标签名` | 删除远程标签 |
| `git push origin :refs/tags/标签名` | 删除远程标签（旧语法） |

## 常规操作

### 提交历史
| 命令 | 说明 |
|------|------|
| `git log` | 查看提交历史 |
| `git log --oneline` | 简洁模式查看历史 |
| `git log --graph` | 图形化查看分支合并历史 |
| `git log --stat` | 查看带有文件变更统计的历史 |
| `git reflog` | 查看所有操作历史（包括已删除的提交） |

### 文件操作
| 命令 | 说明 |
|------|------|
| `git rm 文件名` | 删除文件并添加到暂存区 |
| `git rm -r 目录名` | 递归删除目录 |
| `git rm --cached 文件名` | 从版本控制删除，但保留本地文件 |
| `git mv 原文件 新文件` | 移动或重命名文件 |

### 远程操作
| 命令 | 说明 |
|------|------|
| `git push origin 分支名` | 推送本地分支到远程 |
| `git pull origin 分支名` | 拉取远程分支并合并 |
| `git fetch origin` | 获取远程更新但不合并 |
| `git remote -v` | 查看远程仓库信息 |

### 诊断工具
| 命令 | 说明 |
|------|------|
| `git status` | 查看工作区状态 |
| `git diff` | 查看未暂存的修改 |
| `git diff --staged` | 查看已暂存的修改 |
| `git check-ignore -v 文件名` | 查看忽略规则 |
| `git add -f 文件名` | 强制添加被忽略的文件 |

## 仓库管理

### 初始化仓库
| 命令 | 说明 |
|------|------|
| `git init` | 初始化本地仓库 |
| `git clone 仓库地址` | 克隆远程仓库 |
| `git remote add origin 仓库地址` | 添加远程仓库 |
| `git remote set-url origin 新地址` | 修改远程仓库地址 |

### 同步操作
| 命令 | 说明 |
|------|------|
| `git pull` | 拉取远程更新并合并 |
| `git fetch` | 获取远程所有分支和标签 |
| `git fetch --prune` | 获取更新并清理已删除的远程分支 |

## 文件忽略

### 忽略文件操作
| 命令 | 说明 |
|------|------|
| `git update-index --assume-unchanged 文件` | 忽略已跟踪的单个文件 |
| `git update-index --no-assume-unchanged 文件` | 取消忽略单个文件 |
| `git rm -r --cached 文件/目录` | 取消版本控制但保留本地文件 |
| `git rm -r --cached .` | 取消所有文件的版本控制 |

## 配置相关

### 凭据配置
| 命令 | 说明 |
|------|------|
| `git config --global credential.helper store` | 存储凭据（免密码） |
| `git config --global user.name "用户名"` | 配置全局用户名 |
| `git config --global user.email "邮箱"` | 配置全局邮箱 |

### 其他配置
| 命令 | 说明 |
|------|------|
| `git config --list` | 查看所有配置 |
| `git config --global alias.简写 命令` | 配置命令别名 |

---

## 💡 使用提示

1. **谨慎使用 `--hard` 参数**，它会永久删除未提交的修改
2. **推送前先拉取**，避免冲突：`git pull --rebase`
3. **分支命名规范**：使用有意义的名称，如 `feature/user-auth`
4. **提交信息规范**：使用清晰的描述，说明修改内容和原因
5. **定期清理**：删除已合并的分支和过期的标签

> 注意：部分命令在不同 Git 版本中可能有差异，建议使用 `git --version` 查看版本信息。